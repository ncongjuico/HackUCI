<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no">

      <!--load Google Places API-->
      <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyD97mFaVfbUI2BHA1Chiyx-ExuYjRIipzU">
      </script>

      <!--initialize google map-->
      <script>
      var map;
      function init(){
        //centered on UCI's LatLng
        var center = new google.maps.LatLng(33.6404952,-117.8442962);
        map = new google.maps.Map(document.getElementById('map'), {
          center: center,
          zoom: 13
        });

        var request = {
          location: center,
          radius: 8000,
          types: ['bar']
        };

        //search for bars
        var service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, callback);
      }

      //making sure we have results and no error connecting to google's servers
      function callback(results, status){
        if(status == google.maps.places.PlacesServiceStatus.OK){
          //adds markers on map
          for(var i = 0; i < results.length; i++){
            createMarker(results[i]);
          }
        }
      }

      //places markers on map based on results array
      function createMarker(place){
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });
      }

      google.maps.event.addDomListener(window, 'load', init);
      </script>

      <style>
      html, body, #map {
        height:100%;
        margin: 0px;
        padding: 0px;
      }
      </style>
    </head>

    <body>
      <div id="map">
      </div>
    </body>
  </html>
